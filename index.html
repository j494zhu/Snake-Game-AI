<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onyx Snake AI - Neural Network Demo</title>
    <link rel="stylesheet" href="/static/demo_style.css">
</head>
<body>

    <div class="header">
        <h1>Onyx Snake AI</h1>
        <p>Deep Reinforcement Learning Demo - Dueling DQN with Rust Backend</p>
    </div>

    <div id="menu" class="menu-container">
        <h2 class="menu-title">Select Game Mode</h2>
        <button class="btn btn-primary" onclick="startGame('demo')">
            <span>Watch AI Demo</span>
        </button>
        <button class="btn btn-accent" onclick="startGame('versus')">
            <span>Play vs AI</span>
        </button>
        <div class="features">
            <span class="badge">
                <svg class="badge-icon" fill="currentColor" viewBox="0 0 20 20"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/></svg>
                Neural Network
            </span>
            <span class="badge">
                <svg class="badge-icon" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/></svg>
                Rust Powered
            </span>
            <span class="badge">
                <svg class="badge-icon" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                Dueling DQN
            </span>
        </div>
    </div>

    <div id="game-area" class="game-container hidden">
        <div class="controls-bar">
            <div class="speed-control">
                <label for="speedSlider">Speed:</label>
                <input type="range" id="speedSlider" class="speed-slider" min="20" max="500" value="100">
                <span id="speedValue" class="speed-value">100ms</span>
            </div>
            <div class="status-indicator">
                <div id="statusDot" class="status-dot"></div>
                <span id="statusText">AI Connected</span>
            </div>
            <button class="btn btn-secondary" onclick="location.reload()" style="width:auto; margin:0; padding: 10px 20px;">
                Restart
            </button>
        </div>

        <div class="arena-container">
            <div id="player-side" class="game-panel hidden">
                <div class="panel-header">
                    <div class="panel-title player">
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/></svg>
                        PLAYER
                    </div>
                    <div class="score-display"><span id="p-score">0</span></div>
                </div>
                <canvas id="playerCanvas" class="canvas-player" width="400" height="400"></canvas>
                <div class="controls-hint">
                    Controls: <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> or <kbd>&#8593;</kbd><kbd>&#8592;</kbd><kbd>&#8595;</kbd><kbd>&#8594;</kbd>
                </div>
            </div>

            <div id="ai-side" class="game-panel">
                <div class="panel-header">
                    <div class="panel-title ai">
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20"><path d="M13 7H7v6h6V7z"/><path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd"/></svg>
                        ONYX AI v6
                    </div>
                    <div class="score-display"><span id="ai-score">0</span></div>
                </div>
                <canvas id="aiCanvas" class="canvas-ai" width="400" height="400"></canvas>
            </div>
        </div>
    </div>

    <div id="countdown-overlay" class="countdown-overlay hidden">
        <div id="countdown-number" class="countdown-number">3</div>
    </div>

    <div id="game-over-ui" class="game-over-overlay hidden">
        <div class="game-over-card">
            <h2 id="result-text">Game Over</h2>
            <div class="final-scores">
                <div id="player-final-score" class="final-score-item hidden">
                    <div class="label">Player</div>
                    <div class="value player"><span id="p-final">0</span></div>
                </div>
                <div class="final-score-item">
                    <div class="label">AI</div>
                    <div class="value ai"><span id="ai-final">0</span></div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="location.reload()">Play Again</button>
        </div>
    </div>

    <script src="/static/demo_script.js"></script>
</body>
</html>
